---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/sections/Header.astro";
import Footer from "../components/sections/Footer.astro";
import HeroSection from "../components/sections/HeroSection.astro";
import GlowLineSeparator from "../components/ui/separator/GlowLineSeparator.astro";
---

<html lang="en" data-theme="dark" class="dark">
  <head>
    <BaseHead
      title="Contact"
      description="Get in touch with Austin Crockett. Let's discuss your digital marketing needs, SEO strategy, or content marketing project."
    />
    <!-- Turnstile script (uncomment when ready) -->
    <!-- <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script> -->
  </head>
  <body>
    <Header />
    <main>
      <HeroSection
        title="Get in Touch"
        subtitle="Have a project in mind? Let's discuss how I can help grow your business."
      />

      <section class="max-w-2xl mx-auto px-4 py-12">
        <form
          name="contact"
          method="POST"
          data-netlify="true"
          netlify-honeypot="bot-field"
          action="/contact?success=true"
          class="space-y-6"
        >
          <!-- Hidden form name for Netlify -->
          <input type="hidden" name="form-name" value="contact" />

          <!-- Honeypot field (spam prevention) -->
          <p class="hidden">
            <label>Don't fill this out if you're human: <input name="bot-field" /></label>
          </p>

          <!-- Name Field -->
          <div>
            <label
              for="name"
              class="block text-sm font-medium text-foreground mb-2"
            >
              Name
            </label>
            <input
              type="text"
              id="name"
              name="name"
              required
              placeholder="Your name"
              class="w-full px-4 py-3 rounded-lg bg-[var(--color-bg-secondary)] border border-[var(--color-border)] text-foreground placeholder:text-[var(--color-text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent transition-colors duration-200"
            />
          </div>

          <!-- Email Field -->
          <div>
            <label
              for="email"
              class="block text-sm font-medium text-foreground mb-2"
            >
              Email
            </label>
            <input
              type="email"
              id="email"
              name="email"
              required
              placeholder="your@email.com"
              class="w-full px-4 py-3 rounded-lg bg-[var(--color-bg-secondary)] border border-[var(--color-border)] text-foreground placeholder:text-[var(--color-text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent transition-colors duration-200"
            />
          </div>

          <!-- Subject Field -->
          <div>
            <label
              for="subject"
              class="block text-sm font-medium text-foreground mb-2"
            >
              Subject
            </label>
            <input
              type="text"
              id="subject"
              name="subject"
              required
              placeholder="What's this about?"
              class="w-full px-4 py-3 rounded-lg bg-[var(--color-bg-secondary)] border border-[var(--color-border)] text-foreground placeholder:text-[var(--color-text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent transition-colors duration-200"
            />
          </div>

          <!-- Message Field -->
          <div>
            <label
              for="message"
              class="block text-sm font-medium text-foreground mb-2"
            >
              Message
            </label>
            <textarea
              id="message"
              name="message"
              rows="5"
              required
              placeholder="Tell me about your project or question..."
              class="w-full px-4 py-3 rounded-lg bg-[var(--color-bg-secondary)] border border-[var(--color-border)] text-foreground placeholder:text-[var(--color-text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent transition-colors duration-200 resize-y min-h-[120px]"
            ></textarea>
          </div>

          <!-- Turnstile widget (uncomment when ready) -->
          <!-- <div class="cf-turnstile" data-sitekey="YOUR_SITE_KEY" data-theme="dark"></div> -->

          <!-- Submit Button -->
          <div class="pt-2">
            <button
              type="submit"
              class="w-full sm:w-auto bg-[var(--accent)] hover:bg-[var(--accent-dark)] text-white font-medium px-8 py-3 rounded-lg transition-all duration-200 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-[var(--accent)] focus:ring-offset-2 focus:ring-offset-[var(--color-bg-primary)]"
            >
              Send Message
            </button>
          </div>
        </form>

        <!-- Success Message -->
        <div id="success-message" class="hidden mt-8 p-4 rounded-lg bg-green-500/10 border border-green-500/30 text-green-400 text-center">
          <p class="font-medium">Message sent successfully!</p>
          <p class="text-sm mt-1 opacity-80">I'll get back to you as soon as possible.</p>
        </div>
      </section>

      <GlowLineSeparator />
    </main>
    <Footer />

    <script is:inline>
      // Show success message if redirected after form submission
      if (window.location.search.includes('success=true')) {
        const successMessage = document.getElementById('success-message');
        const form = document.querySelector('form');
        if (successMessage) {
          successMessage.classList.remove('hidden');
        }
        if (form) {
          form.reset();
        }
        // Clean up URL
        history.replaceState(null, '', window.location.pathname);
      }
    </script>
  </body>
</html>
